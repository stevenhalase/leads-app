const express = require('express');
const app = express();
var request = require('request');
var rp = require('request-promise');
var bodyParser = require('body-parser');

const path = require('path');
const port = process.env.PORT || 3090;

app.use(bodyParser.json());
app.use(bodyParser.urlencoded({extended: true}));

app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
  next();
});

app.use(express.static(__dirname + '/www'))

app.get('/', function(req, res) {
    res.sendFile(path.join(__dirname + '/www/index.html'));
});

app.post('/api/fullcontact/domain', function(req, res) {

  res.json("{\n  \"status\" : 200,\n  \"requestId\" : \"64f339fe-d396-4f57-bcc7-5a3ad0a36359\",\n  \"category\" : [ {\n    \"code\" : \"OTHER\",\n    \"name\" : \"Other\"\n  } ],\n  \"logo\" : \"https://d2ojpxxtu63wzl.cloudfront.net/static/7459fa6e61ce93771d6b8ad7f9134efe_9e7f03799dafa6e587757da6d3e7a9fe156b3ac1be2b15949473e7d8179254ce\",\n  \"website\" : \"http://www.nsrit.com\",\n  \"languageLocale\" : \"en\",\n  \"industries\" : [ {\n    \"type\" : \"SIC\",\n    \"name\" : \"Computers, Peripherals, and Software\",\n    \"code\" : \"5045\"\n  }, {\n    \"type\" : \"SIC\",\n    \"name\" : \"Custom Computer Programming Services\",\n    \"code\" : \"7371\"\n  } ],\n  \"organization\" : {\n    \"name\" : \"NSR Business Solutions\",\n    \"approxEmployees\" : 20,\n    \"founded\" : \"1999\",\n    \"overview\" : \"NSR provides our complete set of technology services to a broad range of clients spread over many industries. Our vast experience allows us to bring best practices from many industries to the table for each of our clients. Below is a break-out of NSR client experience in major industries over the last 24 months: 40.75% Manufacturing\",\n    \"contactInfo\" : {\n      \"phoneNumbers\" : [ {\n        \"number\" : \"+1 (866) 702-2755\",\n        \"label\" : \"other\"\n      }, {\n        \"number\" : \"+1 (262) 884-2755\",\n        \"label\" : \"other\"\n      } ],\n      \"addresses\" : [ {\n        \"addressLine1\" : \"1458 Horizon Blvd\",\n        \"addressLine2\" : \"Suite 33\",\n        \"locality\" : \"Racine\",\n        \"region\" : {\n          \"name\" : \"Wisconsin\",\n          \"code\" : \"WI\"\n        },\n        \"country\" : {\n          \"name\" : \"United States\",\n          \"code\" : \"US\"\n        },\n        \"postalCode\" : \"53406\",\n        \"label\" : \"work\"\n      } ]\n    },\n    \"links\" : [ {\n      \"url\" : \"http://nsrit.com/comments/feed\",\n      \"label\" : \"rss\"\n    }, {\n      \"url\" : \"http://nsrit.com/feed\",\n      \"label\" : \"rss\"\n    } ],\n    \"images\" : [ {\n      \"url\" : \"https://d2ojpxxtu63wzl.cloudfront.net/static/0d0bf2dd0e1b9a61944d967a3dc15a1b_00a3dadfa90510081c71e9c6343bb0b63ac7de46c6cfb84566847e21999709b9\",\n      \"label\" : \"twitter\"\n    }, {\n      \"url\" : \"https://d2ojpxxtu63wzl.cloudfront.net/static/7d945c85518b1b4edd312374ec284d55_6b0e7e0704bbcae70e09d9e65eefc0d03dcfeb778bd3a123e3734f942a299616\",\n      \"label\" : \"logo\"\n    }, {\n      \"url\" : \"https://d2ojpxxtu63wzl.cloudfront.net/static/cb18e9eed52470f54126308d5b276134_4c96f3fa7acab48151382c41e581d7e6529f1ca8087b3e89154d9c51c1f51d65\",\n      \"label\" : \"other\"\n    }, {\n      \"url\" : \"https://d2ojpxxtu63wzl.cloudfront.net/static/4f32a4276105b28a6f9b7775e1b800e3_6eb37f6a29cf0480506eeed9ac9e868193e512e85ba830532062e2ae9f9e94f1\",\n      \"label\" : \"other\"\n    } ],\n    \"keywords\" : [ \"Information Services\", \"Judaism\", \"Las Vegas\", \"Nevada\", \"Torah\", \"YMCA\" ]\n  },\n  \"socialProfiles\" : [ {\n    \"typeId\" : \"facebook\",\n    \"typeName\" : \"Facebook\",\n    \"url\" : \"https://www.facebook.com/NSRIT\"\n  }, {\n    \"followers\" : 19,\n    \"following\" : 3,\n    \"typeId\" : \"twitter\",\n    \"typeName\" : \"Twitter\",\n    \"url\" : \"https://twitter.com/NSRIT\",\n    \"username\" : \"NSRIT\",\n    \"id\" : \"126659763\"\n  }, {\n    \"bio\" : \"Managed services.\",\n    \"followers\" : 2,\n    \"typeId\" : \"angellist\",\n    \"typeName\" : \"AngelList\",\n    \"url\" : \"https://angel.co/nsr-business-solutions\",\n    \"username\" : \"nsr-business-solutions\",\n    \"id\" : \"732436\"\n  }, {\n    \"typeId\" : \"klout\",\n    \"typeName\" : \"Klout\",\n    \"url\" : \"http://klout.com/NSRIT\",\n    \"username\" : \"NSRIT\",\n    \"id\" : \"34339951923551289\"\n  }, {\n    \"bio\" : \"NSR Business Solutions is a trusted IT partner for businesses both small and large. Our company includes two amazing teams (divisions for you corporate folks out there) with two unique ways to accelerate your business with technology solutions that work. Our networking team provides all the services of an in-house IT team. From long term planning and budgeting to day-to-day network support, and everywhere in between, they have your in-house IT operations covered. Our development team provides the creative side to your businesses technology solution. From managing your web presence to building custom software, if it requires code or design, they can handle it. Our team focuses on building your web presence by combining the creative thinking of a marketing team with the analytical power of a programming department. Wrap this all in 10 years of history, 200,000+ hours on the job, and partnerships with Microsoft, IBM, VMware, Google, Bing, WatchGuard, McAfee, and many more, and you have NSR Business Solutions.\",\n    \"followers\" : 163,\n    \"typeId\" : \"linkedincompany\",\n    \"typeName\" : \"LinkedIn\",\n    \"url\" : \"https://www.linkedin.com/company/nsr-business-solutions\",\n    \"username\" : \"nsr-business-solutions\",\n    \"id\" : \"83493\"\n  }, {\n    \"typeId\" : \"youtube\",\n    \"typeName\" : \"YouTube\",\n    \"url\" : \"https://youtube.com/user/NSRIT\",\n    \"username\" : \"NSRIT\"\n  } ],\n  \"traffic\" : {\n    \"ranking\" : [ {\n      \"rank\" : 13165970,\n      \"locale\" : \"global\"\n    } ]\n  }\n}");

  // if (typeof req.body.businessURL !== 'undefined') {
  //   var businessURL = encodeURIComponent(req.body.businessURL);

  //   var fullContactUrl = 'https://api.fullcontact.com/v2/company/lookup.json?domain=' + businessURL;

  //   var fullContactOptions = {
  //       method: 'GET',
  //       uri: fullContactUrl,
  //       headers: {
  //         'X-FullContact-APIKey': '29ecdaae61bf307a'
  //       }
  //   };
    
  //   rp(fullContactOptions)
  //     .then(function(data) {
  //       console.log(data)
  //       res.json(data);
  //     })
  //     .catch(function(err) {
  //       console.log(err);
  //       res.json(err);
  //     })
  // }

})

app.post('/api/hunter/domain', function(req, res) {

  res.json(JSON.stringify({  "data": {    "domain": "nsrit.com",    "webmail": false,    "pattern": "{first}",    "organization": null,    "emails": [      {        "value": "craig@nsrit.com",        "type": "personal",        "confidence": 90,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/will-the-facebook-deals-app-increase-check-ins",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/new-intel-hard-drive-has-technology-fans-licking-their-chops",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/can-your-web-site-really-find-new-clients",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/can-your-web-site-really-find-new-clients-part-2",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "sside-church.org",            "uri": "http://sside-church.org/wordpress",            "extracted_on": "2017-03-10",            "last_seen_on": "2017-10-20",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/can-your-web-site-really-find-new-clients",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/lenovo-thinkpad-tablet-vs-ipad2-review",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/nsr-inks-citrix-partnership",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/weve-moved",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/replacing-a-pc-with-a-tablet",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": "Craig",        "last_name": "Anderson",        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "programmers@nsrit.com",        "type": "generic",        "confidence": 65,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/healy-awards",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/aeris-aviation",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/coakley-brothers",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/professional-services-group",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/three-pillars-senior-living-communities",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "jesse@nsrit.com",        "type": "personal",        "confidence": 65,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/test-post-2",            "extracted_on": "2017-10-01",            "last_seen_on": "2017-10-24",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/test-post",            "extracted_on": "2017-10-01",            "last_seen_on": "2017-10-24",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/next-generation-web-technology-html5-css3-and-javascript",            "extracted_on": "2017-10-01",            "last_seen_on": "2017-10-24",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/test-blog-post",            "extracted_on": "2017-10-01",            "last_seen_on": "2017-10-24",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/goodbye-internet-explorer-7",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/next-generation-web-technology-html5-css3-and-javascript",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/migrate-from-joomla-1-5-to-1-6",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/this-year-im-especially-thankful-for-my-ipad",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": "Jesse",        "last_name": "Schmucker",        "position": "Web Technology",        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "jim@nsrit.com",        "type": "personal",        "confidence": 60,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/building-brand-awareness-with-online-video",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/who-wants-to-talk-about-my-company-online-no-one",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/great-writing-makes-great-business",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/great-writing-makes-great-business",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/nook-color-vs-kindle-fire",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/59-of-b2b-decision-makers-research-with-smartphones",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/mobile-marketing-its-time-to-get-in-the-water",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/who-wants-to-talk-about-my-company-online-no-one",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": "Jim",        "last_name": "Mcveigh",        "position": "Mobile Marketing",        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "mark@nsrit.com",        "type": "personal",        "confidence": 59,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/get-the-most-out-of-your-server-hardware",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/email-best-practices-managing-microsoft-outlook-mailbox",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/what-to-look-for-when-buying-a-pc",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/youtube-isnt-just-for-music-videos",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/good-old-saint-click",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/thanksgiving-technology-chinese-food",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/email-best-practices-managing-microsoft-outlook-mailbox",            "extracted_on": "2015-04-28",            "last_seen_on": "2017-03-08",            "still_on_page": false          }        ],        "first_name": "Mark",        "last_name": "Gremer",        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "matt@nsrit.com",        "type": "personal",        "confidence": 49,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/nsr-partners-with-glostream",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/5-crucial-tips-to-preventing-virus-and-spyware-infections",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/do-i-need-to-get-in-on-this-virtualization-stuff",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/still-using-tape-or-backup-to-disk-stop-and-virtualize",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/get-windows-8-preview-release-now",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/android-phones-ipad-iphone-how-do-i-get-some-work-done",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/update-updates-driving-me-crazy",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/magic-jack-myth-dud-or-what",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/still-using-tape-or-backup-to-disk-stop-and-virtualize",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "kevin@nsrit.com",        "type": "personal",        "confidence": 44,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/is-my-computer-safe",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/welcome-to-facebook-and-follow-the-links",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/can-virtualization-help-address-the-problem-of-aging-hardware",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/holiday-scams-and-computer-security",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/microsoft-surface-too-little-too-late",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/virus-scanner-options-the-one-youve-heard-of-isnt-always-best",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/holiday-cyber-awareness",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "josh@nsrit.com",        "type": "personal",        "confidence": 41,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/passionate-small-business-we-are-you",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "ehorbinski@nsrit.com",        "type": "personal",        "confidence": 28,        "sources": [          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/social-media-unplugged-the-importance-of-client-partnerships-and-community-involvement",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/8-reasons-i-love-my-wifes-new-iphone",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "mynsr.com",            "uri": "http://mynsr.com/dropbox-vs-sugarsync-two-cloud-file-synchronizer-services-compared",            "extracted_on": "2017-09-21",            "last_seen_on": "2017-09-21",            "still_on_page": true          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/setting-your-it-projects-up-for-success",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/amazon-web-services-partnership-announced",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/mailbox-management-advice-from-unclutterer",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/nsr-citrix-central-now-available",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/technology-thanksgiving",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "eric@nsrit.com",        "type": "personal",        "confidence": 1,        "sources": [          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/a-tech-blog-mobile-apps-reviewed",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/a-tech-blog-horizon-of-entertainment",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          },          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/a-tech-apprentice-blog-keeping-hot-technology-cool",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      },      {        "value": "katie@nsrit.com",        "type": "personal",        "confidence": 1,        "sources": [          {            "domain": "nsrit.com",            "uri": "http://nsrit.com/introducing-katie-bose",            "extracted_on": "2016-03-09",            "last_seen_on": "2016-11-24",            "still_on_page": false          }        ],        "first_name": null,        "last_name": null,        "position": null,        "linkedin": null,        "twitter": null,        "phone_number": null      }    ]  },  "meta": {    "results": 11,    "limit": 50,    "offset": 0,    "params": {      "domain": "http://www.nsrit.com/",      "company": null,      "type": null,      "offset": 0,      "seniority": null,      "department": null    }  }}));

  // if (typeof req.body.businessURL !== 'undefined') {
  //   var businessURL = encodeURIComponent(req.body.businessURL);

  //   var hunterUrl = 'https://api.hunter.io/v2/domain-search?domain=' + businessURL + '&api_key=ae2f419b22fcf725379b54db12a63212d008c72d&limit=50';

  //   var hunterOptions = {
  //       method: 'GET',
  //       uri: hunterUrl
  //   };
    
  //   rp(hunterOptions)
  //     .then(function(data) {
  //       console.log(data)
  //       res.json(data);
  //     })
  //     .catch(function(err) {
  //       console.log(err);
  //       res.json(err);
  //     })
  // }

})

app.post('/api/anymail/domain', function(req, res) {

  // res.json(JSON.stringify({"name":"StatusCodeError","statusCode":404,"message":"404 - \"{\\n  \\\"error\\\": \\\"not_found\\\",\\n  \\\"error_explained\\\": \\\"We could not find an email at retailstoreconstruction.com\\\",\\n  \\\"status\\\": \\\"error\\\"\\n}\"","error":"{\n  \"error\": \"not_found\",\n  \"error_explained\": \"We could not find an email at retailstoreconstruction.com\",\n  \"status\": \"error\"\n}","options":{"method":"POST","uri":"https://api.anymailfinder.com/v3.1/search/domain.json","headers":{"content-type":"application/x-www-form-urlencoded","X-Api-Key":"92e943a739f8bb3f648d7273f75e7273c6b6d08e"},"form":{"domain":"http://www.retailstoreconstruction.com/"},"simple":true,"resolveWithFullResponse":false,"transform2xxOnly":false},"response":{"statusCode":404,"body":"{\n  \"error\": \"not_found\",\n  \"error_explained\": \"We could not find an email at retailstoreconstruction.com\",\n  \"status\": \"error\"\n}","headers":{"access-control-allow-origin":"*","content-type":"application/json","date":"Thu, 16 Nov 2017 02:23:11 GMT","server":"Apache/2.4.23 (Amazon) mod_wsgi/3.5 Python/3.4.3","content-length":"129","connection":"Close"},"request":{"uri":{"protocol":"https:","slashes":true,"auth":null,"host":"api.anymailfinder.com","port":443,"hostname":"api.anymailfinder.com","hash":null,"search":null,"query":null,"pathname":"/v3.1/search/domain.json","path":"/v3.1/search/domain.json","href":"https://api.anymailfinder.com/v3.1/search/domain.json"},"method":"POST","headers":{"content-type":"application/x-www-form-urlencoded","X-Api-Key":"92e943a739f8bb3f648d7273f75e7273c6b6d08e","content-length":54}}}}));

  if (typeof req.body.businessURL !== 'undefined') {
    var businessURL = req.body.businessURL;

    var anymailUrl = 'https://api.anymailfinder.com/v3.1/search/domain.json';

    var anymailOptions = {
        method: 'POST',
        uri: anymailUrl,
        headers: {
          'content-type': 'application/x-www-form-urlencoded',
          'X-Api-Key': '92e943a739f8bb3f648d7273f75e7273c6b6d08e'
        },
        form: { domain: businessURL }
    };
    
    rp(anymailOptions)
      .then(function(data) {
        console.log(data)
        res.json(data);
      })
      .catch(function(err) {
        console.log(err);
        res.json(err);
      })
  }

})

app.post('/api/pipl', function(req, res) {

  res.json("{\n    \"@http_status_code\": 200, \n    \"@visible_sources\": 6, \n    \"@available_sources\": 45, \n    \"@persons_count\": 1, \n    \"@search_id\": \"1711160225511216938603899048966526197\", \n    \"query\": {\n        \"names\": [\n            {\n                \"first\": \"Craig\", \n                \"last\": \"Anderson\", \n                \"display\": \"Craig Anderson\"\n            }\n        ], \n        \"emails\": [\n            {\n                \"address\": \"craig@nsrit.com\", \n                \"address_md5\": \"2305fc2f08a7355e0e5571ed6cbcbcb5\"\n            }\n        ]\n    }, \n    \"available_data\": {\n        \"basic\": {\n            \"relationships\": 1, \n            \"usernames\": 3, \n            \"jobs\": 3, \n            \"addresses\": 2, \n            \"phones\": 1, \n            \"landline_phones\": 1, \n            \"educations\": 2, \n            \"languages\": 1, \n            \"user_ids\": 4, \n            \"social_profiles\": 4, \n            \"names\": 1, \n            \"images\": 3, \n            \"genders\": 1, \n            \"emails\": 1\n        }, \n        \"premium\": {\n            \"relationships\": 1, \n            \"usernames\": 3, \n            \"jobs\": 4, \n            \"addresses\": 5, \n            \"phones\": 4, \n            \"mobile_phones\": 2, \n            \"landline_phones\": 2, \n            \"educations\": 2, \n            \"languages\": 1, \n            \"user_ids\": 4, \n            \"social_profiles\": 6, \n            \"names\": 1, \n            \"dobs\": 1, \n            \"images\": 3, \n            \"genders\": 1, \n            \"emails\": 6\n        }\n    }, \n    \"person\": {\n        \"@id\": \"ad37f4a5-395a-476f-997d-ce490b4fd559\", \n        \"@search_pointer\": \"a163ec84afecaacf4a6fb0ff887f6c738ba9d87215b670ac50d2d7c6e7c7c790ae142dd2811972171c09a0a6451efd721ee6ca3fac73529897fc972c307bc8cf482cffbd6330e6a041f645b8301d97d005da9598c162fce8633bc60a82ef22416573ab21abf31db3e50710fa95a2eb791a3e4866bf8a02af53f104b2bac04ee54528511b476aef2622a84e5c7b9e71f3878da4ee3eb1c969b90b8788002d04e82026c2dd339bd889402749394277c546342be78796153a2e0a3cb6b52cccb78e2557dd1888aa9fabf5e78cb667c352f57aa5650f6a659ece7229340f22821639903714a127cc9f0dceb5f9a3cdee0e6ec85f0e3ad4e03df90dc32611d8e9f24e7a64bb4fc3c1dd88b5f01a7ad732253537b5be2b5369ceb667f50ec60d2f22823c727e2abf5f03c0b5b72a8158b9865f58652826efb1b602b406a3ccf9e344b67bc57cca9c51f7093e9dd01f1f787c5135b7ba595fa6a922bed51a61263663ff9221dc8e61213c644d4d689a43093c8d817cfa9cc918bf8a8f9c6ea77be80eaa48f6834c3a05bfa8e66dfbf3f6111b452442c1cd0a436026d4d8e2a685dfcca538656d365a70a07ef6cedb6e74039154defcf8af43a8447b16ecc9df917690ed33a7bf3b6f240c42036bf0d9a470be522af89679fd61db47cf73793280b4a2534da14023af5d23582deea20e89d861bd3ed12e14ac298475630ba4e866060adcd83710034c50b7f054fce6c4247d9f0acefe8684e49d022c3e0eb64189e5394f7ac977118800a7f35393453539eaacf7a05274e2254214b0fdca7f211fd44f4c4d270875b563c67226f90da7702b9d8a5ef93c4b822b4ea82bdb6f88aca6d7aecaa74c9b44b068101c21a336340fc2fbed4427ed0b7d273ae8caee6a1bbc45f772e647b0165d57f6a93340387f50e04a480404e6f4ec8fe4b740678960991f732c6d0593704acb344781b6e16e0bdfb4762a8057364a57386b185165e0aa1c101565842bffb75b45c29405df9161416911051ef0446cbadb06c6a985bd63acfb3d90593b82c388b45398c1f6918d6df07f1e46dab12128ffa3ce2238aeee990eabe04fd1376929aa426bf53cc5fc5fc0428b35684117788bb53425c6ebd18718cd57ad9b175a07ae24caff54fd142a07b19f3204268095caad7c6961f09136a08f59bd515a39ba819b74b7860ba1f4fd6ed1430aaeba63b99a750897f9518f4cdc03e5cb2102b95b3c1535fce6ca1640c4d7c50aa925da47934e3848116809183a39fc55df571debcab603343e7822dffd9403c406afee495360a4c798e21740a3746984ab31605cd0685f7f9f6bd9941e4f25456257bc905514b765404ed2d3a1a1fccb3de2c0b04aaa3b5a9cfa537edb27fdd50a5b5efafb51d84eb80cd105e4a13b4f8c2e82289fa439cdd95999bffca413dd4230e239d01faf177c0e0b47b0b911524fc3d076a0495ec16d1d9d641f3c361a5a60a918309a3c0a21f74bb9c928ffa09a7fe7d2cadfb9a7d0b8ad83ca1a5c9f638034ee2d78bcaf0c4ec7a1c03504ee58a8485496f2327e89f64e3ae223c263879d422200eebe5be02bb253eca76256886318c68050ffe6219cc52f9f47449f8a9de2d8c64dd83aff7f8acbaea57dddfe38a698f68d4e4bece8bed56ef33432ac92df90fe29f529a51f50ff09057d4c3fa339d7ce9e79b317ccbae836adf8e915ce5d7cd30d2f32bea4d695124cdd19c551811e149399bf7a716abfad11e5153019e0ca00ab215cbf99723e07fb0702d24bb9b7c0d4c70c9bd7d07782a81be652e8622d686251c26e26c26a71863c558a426c169a4faf7810d3a155d61fa7ab39463be94344d0ead99dd6eacfea02aa87df9c8d12398b888ccabf2a0a268b719c553b92067aae6eacd0160b6ec6abeecabcbff142ccba3e8dc859ca7c476e28e564405733c228e4d166343cf2f67fddc825f7349b8fa33770af7f7c3b6f99a03174554289be8d5b3c691b1026ada90291a2e9531cdd458294b7484f1ce22c8f2a02dfa8928e05f90c7a8bf1d859752b7298f15bd56876ecda434e6558f62a17d48b3b6fb9f3c84ece9b745491753c469e119692b19d581d37fe3610b55206358498c07e107ae3b8fb9497c71c0f05d5946822bfec571c2e3a1a86914225aa12d7cb268cacad0b0fa3b99a3bf090f4c1a976f0732a1179a88df2830bc0eee58824a9c91d69faf2186d1281325f4f6b7549923eb345e6018aa1da5fc8b4fc042dd7f856891a33f3870ae0107a2691a8da6f955bb7d0dee400e032c85df37e9759d4ac9fed861b3eb5364d57642fd045a09ccda3d4aaa2ebdc24383a3fe5fa3b769323de6c4d4c1d221500bfaa8c74c1ca5aac0c074a651ef3c6f05bfa08c74b945d83281eee07c5fed60a2bcc25fa19c86653bdd023dce69c9b7e105f3856da1f833519000369707391103b90243d0d9aecffe7b777b30e8fcbe83d679f5636f88d84b236a90f1cf35ecdca599b8aa9354de9227d98f9bca82cf7f44c19f1ad89ab04e4032b15cb263a03f77304459a369d51f637bf71817b3167c6e4f0adaa71eb6cbac816d6c3ebe88afc94cf1ff8615381beca09dacf1c8297ccf7fbfc07af3de38625f4fa95d6bce48bf799d6e698ea699067bb2cd52746d7f7ef372ac453668c59b71d2252f5c03e506803b55ef886e82c216359091466aa3f6cfc274da9f93c94d416899b490577b8c4229c574c2b668c6260622e815b80867da5fce272e7e3cfae78637eb99a404ec266c12c08315a4f25ee1d603a6ad0da49ffb95d0320ed3e6103cc260579bb4d74c686cc322ae4c25daeb5da41aed14e5e8101ff3d3a9e3126e64b784c7b3ba3843bc58d1d565cafb92c78208717be7e613bca0cddeb83d248b90643f8abae67d66bb6a78c6f868b772da3a8c62c0c73bbec8f57e454a9e76aee9faf3cbada524cb2dde177c6cbdce15922b3ac0893b835eaecc688daff29fcc769dd5402ba4443a8b2708e4d8e69d4e3c5bb0f394c518e37171e65c2ada4203f42c55109a6826af11f7019329485dfdd118f52752a3bedef5f44a8822d9356aabdc369759acc568ec59b8d172a2ae37337998726850a34d4f41ce5069f8c3272efcf679c2fb83d4c6f324deefdb516ab5e6f242b74dc150d2754b9fab307960abee0e9e4bad1d0dcfa93a799996c6b3ada2ede9b43bc4e6cbbef492553cad1c9262cf5e166a422808ec31198f68a0af4d909291010c3c0976adaccb2052ac837076f87216f650f7b5b2660ee45bc7ad7c287d176a8e7a9d8298e5bfb8e39930d5c9fa97637d2dfda2a58a9e0dbe5baaeb5ef7ef3dc811bc1917325d07d16b3b23c1243f79887434582b51102cff2b7a007bf2dd15fd4c71a2c87a1dba59b1c1ea3b6f29df05b75ab6184eeff2ae6c3ce0410c6ac644cbd28a3a9fa9dc3015e313490f12f76970e2e3af77da9727613f3fed50b94c99d2838e6f199fe99c5b9f140568bb064d0a90f80293a50e1fcb9a53ba86b5283246a00aa6b871a9df2543c5aaf152416a99f0f4f093215d734eb5b2c4c0f95312996\", \n        \"names\": [\n            {\n                \"prefix\": \"Mr\", \n                \"first\": \"Craig\", \n                \"middle\": \"M\", \n                \"last\": \"Anderson\", \n                \"display\": \"Craig M Anderson\"\n            }\n        ], \n        \"emails\": [\n            {\n                \"@email_provider\": false, \n                \"address\": \"full.email.available@business.subscription\", \n                \"address_md5\": \"2305fc2f08a7355e0e5571ed6cbcbcb5\"\n            }\n        ], \n        \"usernames\": [\n            {\n                \"content\": \"nsrcraiganderson\"\n            }, \n            {\n                \"content\": \"legos211\"\n            }, \n            {\n                \"content\": \"craig.anderson.7359\"\n            }\n        ], \n        \"phones\": [\n            {\n                \"country_code\": 1, \n                \"number\": 4142319524, \n                \"display\": \"414-231-9524\", \n                \"display_international\": \"+1 414-231-9524\"\n            }\n        ], \n        \"gender\": {\n            \"content\": \"male\"\n        }, \n        \"languages\": [\n            {\n                \"@inferred\": true, \n                \"region\": \"US\", \n                \"language\": \"en\", \n                \"display\": \"en_US\"\n            }\n        ], \n        \"addresses\": [\n            {\n                \"country\": \"US\", \n                \"state\": \"WI\", \n                \"city\": \"Milwaukee\", \n                \"street\": \"E Kane Place\", \n                \"house\": \"1725\", \n                \"zip_code\": \"53202\", \n                \"display\": \"1725 E Kane Place, Milwaukee, Wisconsin\"\n            }, \n            {\n                \"country\": \"US\", \n                \"state\": \"WI\", \n                \"city\": \"Racine\", \n                \"street\": \"Whitewater Street\", \n                \"house\": \"6645\", \n                \"zip_code\": \"53402\", \n                \"display\": \"6645 Whitewater Street, Racine, Wisconsin\"\n            }\n        ], \n        \"jobs\": [\n            {\n                \"title\": \"President and Owner\", \n                \"organization\": \"NSR Business Solutions\", \n                \"date_range\": {\n                    \"start\": \"1999-08-01\"\n                }, \n                \"display\": \"President and Owner at NSR Business Solutions (since 1999)\"\n            }, \n            {\n                \"title\": \"Senior Systems Administrator\", \n                \"organization\": \"Wisconsin Color Press\", \n                \"industry\": \"Printing\", \n                \"date_range\": {\n                    \"start\": \"1997-05-01\", \n                    \"end\": \"1999-08-01\"\n                }, \n                \"display\": \"Senior Systems Administrator at Wisconsin Color Press (1997-1999)\"\n            }, \n            {\n                \"title\": \"IT Manager\", \n                \"organization\": \"Stallion Leather\", \n                \"date_range\": {\n                    \"start\": \"1995-01-01\", \n                    \"end\": \"1997-12-31\"\n                }, \n                \"display\": \"IT Manager at Stallion Leather (1995-1997)\"\n            }\n        ], \n        \"educations\": [\n            {\n                \"school\": \"University of Wisconsin-Milwaukee\", \n                \"date_range\": {\n                    \"start\": \"1997-01-01\", \n                    \"end\": \"2001-12-31\"\n                }, \n                \"display\": \"University of Wisconsin-Milwaukee (1997-2001)\"\n            }, \n            {\n                \"school\": \"Marquette University High School\", \n                \"date_range\": {\n                    \"start\": \"1992-01-01\", \n                    \"end\": \"1996-12-31\"\n                }, \n                \"display\": \"Marquette University High School (1992-1996)\"\n            }\n        ], \n        \"relationships\": [\n            {\n                \"@type\": \"other\", \n                \"names\": [\n                    {\n                        \"first\": \"Lj\", \n                        \"last\": \"Rosales\", \n                        \"display\": \"Lj Rosales\"\n                    }\n                ]\n            }\n        ], \n        \"user_ids\": [\n            {\n                \"content\": \"#b240745@linkedin\"\n            }, \n            {\n                \"content\": \"5/74/b24@linkedin\"\n            }, \n            {\n                \"content\": \"1026804776@facebook\"\n            }, \n            {\n                \"content\": \"15083596@linkedin\"\n            }\n        ], \n        \"images\": [\n            {\n                \"url\": \"https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAAMDAAAAJGFkZjAwZDdlLTA2OWEtNDlhYy04NjNhLTFjYWMwMWVkMGJlYQ.jpg\", \n                \"thumbnail_token\": \"AE2861B20B7D6E22D4C9479C5C7387EF9C9CE823D35EABEA7AAFCEB4822D4BE6583BC7DC98D6B5210198C7212B2FD214763272C79F7CA63BE2B8506D2169601481E8B141709B07CC0C2EBC9AD0DDD4B7B2BB8F0DFB8A77A83EF83CE2D44378D9E0BEE83D052C066780E7F8961368434EEA7241C3C48BF6473138E1E11682F9A11B74EA7B6340\"\n            }, \n            {\n                \"url\": \"http://graph.facebook.com/1026804776/picture?type=large\", \n                \"thumbnail_token\": \"AE2861B242686E6ACBCD539D133B8AE59A9AE962DB1FA5AA7AF08DABDD6B01F91F648283D9CDB2322ADF85744B699B543C4E5FE3AC5A925CC78A78485D1D1768F691\"\n            }, \n            {\n                \"url\": \"https://s-media-cache-ak0.pinimg.com/avatars/legos211_1335235933_140.jpg\", \n                \"thumbnail_token\": \"AE2861B20B7D6E22CA814E9059348AAB9C99E565D51CA7AE27F1CCF2813454AE0530DAD8D9DCAD302ACB85625B718743360001B3EF62C64990CC231F5511126A9A98C4301FBB30ED4110A5B2C3BAA5E6ECC7EF\"\n            }\n        ], \n        \"urls\": [\n            {\n                \"@source_id\": \"9007cf1810ac7658d431a07482e0881e\", \n                \"@domain\": \"linkedin.com\", \n                \"@name\": \"LinkedIn\", \n                \"@category\": \"professional_and_business\", \n                \"url\": \"http://www.linkedin.com/in/nsrcraiganderson\"\n            }, \n            {\n                \"@source_id\": \"eb3b9df64aa70549cc86d4136750b582\", \n                \"@domain\": \"facebook.com\", \n                \"@name\": \"Facebook\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://www.facebook.com/people/_/1026804776\"\n            }, \n            {\n                \"@source_id\": \"fd14f30f0040b27e45c0200acbdc234f\", \n                \"@domain\": \"pinterest.com\", \n                \"@name\": \"Pinterest\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://pinterest.com/legos211/\"\n            }, \n            {\n                \"@source_id\": \"df64a1df96208b87735ed9d7a8b214be\", \n                \"@domain\": \"whitepages.plus\", \n                \"@name\": \"WhitePages.plus\", \n                \"@category\": \"contact_details\", \n                \"url\": \"https://whitepages.plus/n/Craig_M_Anderson/Racine_WI/449e35f304027d5e90d29a200c46a5b0\"\n            }, \n            {\n                \"@source_id\": \"b58ce0c863b986ecbf99dd15299e3fe1\", \n                \"@domain\": \"linkedin.com\", \n                \"@name\": \"LinkedIn\", \n                \"@category\": \"professional_and_business\", \n                \"url\": \"http://www.linkedin.com/in/nsrcraiganderson\"\n            }, \n            {\n                \"@source_id\": \"5c6a64432089d867c1e256c7c8346c31\", \n                \"@domain\": \"whitepages.plus\", \n                \"@name\": \"WhitePages.plus\", \n                \"@category\": \"contact_details\", \n                \"url\": \"https://whitepages.plus/n/Craig_Anderson/Milwaukee_WI/fad69e5d771185bba42d5aac102ff14e\"\n            }, \n            {\n                \"@domain\": \"nsrit.com\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://www.nsrit.com/\"\n            }, \n            {\n                \"@domain\": \"facebook.com\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://www.facebook.com/craig.anderson.7359\"\n            }, \n            {\n                \"@domain\": \"nsrit.com\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://www.nsrit.com/author/craig\"\n            }, \n            {\n                \"@domain\": \"gobroapp.com\", \n                \"@category\": \"personal_profiles\", \n                \"url\": \"http://www.gobroapp.com/\"\n            }\n        ]\n    }\n}");

  // if (typeof req.body.emailAddress !== 'undefined') {
  //   var firstName = req.body.firstName;
  //   var lastName = req.body.lastName;
  //   var emailAddress = req.body.emailAddress;

  //   var formData = {
  //     key: 'x8vc6vjl0eykr67j1swdc5m3'
  //   };

  //   if (firstName && firstName !== '' && lastName && lastName !== '') {
  //     formData.first_name = firstName;
  //     formData.last_name = lastName;
  //   }

  //   if (emailAddress && emailAddress !== '') {
  //     formData.email = emailAddress;
  //   }

  //   var piplUrl = 'http://api.pipl.com/search';

  //   var piplOptions = {
  //       method: 'POST',
  //       uri: piplUrl,
  //       headers: {
  //         'content-type': 'application/x-www-form-urlencoded',
  //       },
  //       form: formData
  //   };
    
  //   rp(piplOptions)
  //     .then(function(data) {
  //       console.log(data)
  //       res.json(data);
  //     })
  //     .catch(function(err) {
  //       console.log(err);
  //       res.json(err);
  //     })
  // }

})

app.listen(port, () => {
    console.log('Server started at http://localhost:' + port);
})